importance: 5

---

# دکوراتور جاسوس

یک دکوراتور `spy(func)` بسازید که باید دربرگیرنده‌ای را برگرداند که تمام فراخوانی‌های تابع را درون ویژگی `calls` خودش ذخیره کند.

هر فراخوانی به عنوان آرایه‌ای از آرگومان‍‌ها ذخیره می‌شود.

برای مثال:

```js
function work(a, b) {
  alert( a + b ); // یک تابع یا متد داخواه است work تابع
}

*!*
work = spy(work);
*/!*

work(1, 2); // 3
work(4, 5); // 9

for (let args of work.calls) {
  alert( 'call:' + args.join() ); // "call:1,2", "call:4,5"
}
```

پی‌نوشت: این دکوراتور بعضی اوقات در انجام یونیت تست (unit-testing) کاربرد دارد. شکل پیشرفته آن `sinon.spy` در کتابخانه [Sinon.JS](http://sinonjs.org/) است.
