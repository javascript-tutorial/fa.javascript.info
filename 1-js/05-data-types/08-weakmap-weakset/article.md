# ุณุงุฎุชุงุฑูุง WeakMap ู WeakSet

ููุงูุทูุฑ ฺฉู ุงุฒ ูุตู <info:garbage-collection> ูโุฏุงููุ ููุชูุฑ ุฌุงูุงุงุณฺฉุฑูพุช ุชุง ุฒูุงู ฺฉู ฺฉ ููุฏุงุฑ ยซูุงุจู ุฏุณุชุฑุณยป ุจุงุดุฏ ู ููฺฉู ุจุงุดุฏ ุงุณุชูุงุฏู ุดูุฏุ ุขู ุฑุง ุฏุฑ ุญุงูุธู ูฺฏู ูโุฏุงุฑุฏ.

ุจุฑุง ูุซุงู:
```js
let john = { name: "John" };

// ุจู ุขู ุฑุฌูุน ูโฺฉูุฏ john ุูโุชูุงู ุจู ุดุก ุฏุณุชุฑุณ ูพุฏุง ฺฉุฑุฏ

// ุจุงุฒููุณ ูุฑุฌุน
john = null;

*!*
// ุดุก ุงุฒ ุญุงูุธู ูพุงฺฉ ูโุดูุฏ
*/!*
```

ูุนูููุง ูฺฺฏโูุง ฺฉ ุดุก ุง ุงููุงูโูุง ฺฉ ุขุฑุงู ุง ุณุงุฎุชุงุฑูุง ุฏฺฏุฑ ุฏุงุฏู ุชุง ุฒูุงู ฺฉู ุฏุฑ ุญุงูุธู ุจุงุดุฏุ ูุงุจู ุฏุณุชุฑุณ ูุฑุถ ู ุฏุฑ ุญุงูุธู ุญูุธ ูโุดููุฏ.

ุจุฑุง ูุซุงูุ ุงฺฏุฑ ูุง ฺฉ ุดุก ุฑุง ุฏุฑูู ฺฉ ุขุฑุงู ุจฺฏุฐุงุฑูุ ุณูพุณ ุชุง ุฒูุงู ฺฉู ุขุฑุงู ุฒูุฏู ุจุงุดุฏุ ุดุก ูู ุฒูุฏู ุฎูุงูุฏ ุจูุฏุ ุญุช ุงฺฏุฑ ูฺ ุฑุฌูุน ุฏฺฏุฑ ุจู ุขู ูุจุงุดุฏ.

ูุงููุฏ ุงูุฌุง:

```js
let john = { name: "John" };

let array = [ john ];

john = null; // ุจุงุฒููุณ ูุฑุฌุน

*!*
// ุจู ุขู ุฑุฌูุน ูโุดุฏุ ุฏุฑูู ุขุฑุงู ุฐุฎุฑู ุดุฏู ุงุณุช john ุดุกุง ฺฉู ูุจูุง ุชูุณุท
// ุจู ููู ุฏูู ุฒุจุงููโุฑูุจ ููโุดูุฏ
// ุขู ุฑุง ุฏุฑุงูุช ฺฉูู array[0] ูโุชูุงูู ุจุง
*/!*
```

ูุดุงุจู ููู ููุฑุฏุ ุงฺฏุฑ ูุง ุงุฒ ุดุกุง ุจู ุนููุงู ฺฉูุฏ ุฏุฑ ฺฉ `Map` ูุนููู ุงุณุชูุงุฏู ฺฉููุ ุณูพุณ ุชุง ุฒูุงู ฺฉู `Map` ูุฌูุฏ ุฏุงุดุชู ุจุงุดุฏุ ุขู ุดุก ูู ูุฌูุฏ ุฎูุงูุฏ ุฏุงุดุช. ุงู ุดุก ุญุงูุธู ุฑุง ุงุดุบุงู ูโฺฉูุฏ ู ุฒุจุงููโุฑูุจ ููโุดูุฏ.

ุจุฑุง ูุซุงู:

```js
let john = { name: "John" };

let map = new Map();
map.set(john, "...");

john = null; // ุจุงุฒููุณ ูุฑุฌุน

*!*
// ุุฐุฎุฑู ุดุฏู ุงุณุช map ุฏุฑูู john
// ุขู ุฑุง ุฏุฑุงูุช ฺฉูู map.keys() ูโุชูุงูู ุจุง ุงุณุชูุงุฏู ุงุฒ
*/!*
```

`WeakMap` ุจู ุตูุฑุช ุงุณุงุณ ุงุฒ ุงู ุฌูุจู ุชูุงูุช ุฏุงุฑุฏ. ุงู ุณุงุฎุชุงุฑ ุงุฒ ุฒุจุงููโุฑูุจ ฺฉูุฏูุง ฺฉู ุดุก ูุณุชูุฏ ุฌููฺฏุฑ ููโฺฉูุฏ.

ุจุงุฏ ุจุง ูุซุงูโูุง ุจุจูู ฺฉู ุจู ฺู ูุนู ุงุณุช.

## ุณุงุฎุชุงุฑ WeakMap

ุงููู ุชูุงูุช ุจู `Map` ู `WeakMap` ุงู ุงุณุช ฺฉู ฺฉูุฏูุง ุจุงุฏ ุดุก ุจุงุดูุฏ ูู ููุฏุงุฑ ุงููู:

```js run
let weakMap = new WeakMap();

let obj = {};

weakMap.set(obj, "ok"); // ุจู ุฏุฑุณุช ฺฉุงุฑ ูโฺฉูุฏ (ฺฉูุฏ ุงุฒ ููุน ุดุก)

*!*
// ููโุชูุงู ุงุฒ ุฑุดุชู ุจู ุนููุงู ฺฉูุฏ ุงุณุชูุงุฏู ฺฉุฑุฏ
weakMap.set("test", "Whoops"); // ุดุก ูุณุช "test" ุงุฑูุฑ ูโุฏูุฏ ฺูู
*/!*
```

ุญุงูุง ุงฺฏุฑ ูุง ุจุฎูุงูู ุงุฒ ุดุก ุจู ุนููุงู ฺฉูุฏ ุฏุฑ ุขู ุงุณุชูุงุฏู ฺฉูู ู ูฺ ุฑุฌูุน ุฏฺฏุฑ ุจู ุดุก ูุจุงุดุฏ -- ุงู ุดุก ุจู ุทูุฑ ุฎูุฏฺฉุงุฑ ุงุฒ ุญุงูุธู ูพุงฺฉ ูโุดูุฏ (ููฺูู ุงุฒ map).

```js
let john = { name: "John" };

let weakMap = new WeakMap();
weakMap.set(john, "...");

john = null; // ุจุงุฒููุณ ูุฑุฌุน

// !ุงุฒ ุญุงูุธู ูพุงฺฉ ุดุฏ john
```

ุจุง `Map` ูุนููู ุฏุฑ ูุซุงู ุจุงูุง ููุงุณู ฺฉูุฏ. ุญุงูุง ุงฺฏุฑ `john` ููุท ุจู ุนููุงู ฺฉูุฏ `WeakMap` ูุฌูุฏ ุฏุงุดุชู ุจุงุดุฏ -- ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ุงุฒ map (ู ุญุงูุธู) ูพุงฺฉ ูโุดูุฏ.

ุณุงุฎุชุงุฑ `WeakMap` ุงุฒ ุญูููโุฒุฏู ู ูุชุฏูุง `keys()`ุ `values()`ุ `entries()` ูพุดุชุจุงู ููโฺฉูุฏุ ูพุณ ูฺ ุฑุงู ุจุฑุง ฺฏุฑูุชู ุชูุงู ฺฉูุฏูุง ุง ููุฏุงุฑูุง ูุณุช.

`WeakMap` ููุท ูุชุฏูุง ุฒุฑ ุฏุงุฑุฏ:

- `weakMap.get(key)`
- `weakMap.set(key, value)`
- `weakMap.delete(key)`
- `weakMap.has(key)`

ฺุฑุง ฺูู ูุญุฏูุฏุชโูุง ูุฌูุฏ ุฏุงุฑุฏุ ุจู ุฎุงุทุฑ ุฏูุงู ูู. ุงฺฏุฑ ฺฉ ุดุก ุชูุงู ุฑุฌูุนโูุง ุฏฺฏุฑ ุจู ุฎูุฏ ุฑุง ุงุฒ ุฏุณุช ุจุฏูุฏ (ูุงููุฏ `john` ุฏุฑ ฺฉุฏ ุจุงูุง)ุ ุณูพุณ ุจุงุฏ ุจู ุทูุฑ ุฎูุฏฺฉุงุฑ ุฒุจุงููโุฑูุจ ุดูุฏ. ุงูุง ุงุฒ ูุญุงุธ ูู ูุดุฎุต ูุณุช ฺฉู *ุฒุจุงููโุฑูุจ ฺู ุฒูุงู ุงุชูุงู ูโุงูุชุฏ*.

ููุชูุฑ ุฌุงูุงุงุณฺฉุฑูพุช ุฏุฑุจุงุฑู ุขู ุชุตูู ูโฺฏุฑุฏ. ููฺฉู ุงุณุช ูพุงฺฉโุณุงุฒ ุญุงูุธู ุฑุง ุจูุงูุงุตูู ุงูุฌุงู ุฏูุฏ ุง ุตุจุฑ ฺฉูุฏ ุชุง ุญุฐูโูุง ุจุดุชุฑ ุฑุฎ ุฏููุฏ. ูพุณ ุจู ุทูุฑ ููุ ุชุนุฏุงุฏ ฺฉููู ุงููุงูโูุง `WeakMap` ูุนููู ูุณุช. ููุชูุฑ ููฺฉู ุงุณุช ุขู ุฑุง ูพุงฺฉ ฺฉุฑุฏู ุจุงุดุฏ ุง ุงู ฺฉุงุฑ ุฑุง ุฏุฑ ฺูุฏ ูุณูุช ุงูุฌุงู ุฏูุฏ. ุจู ุงู ุฏููุ ูุชุฏูุง ฺฉู ุจู ุชูุงู ฺฉูุฏูุง/ููุฏุงุฑูุง ุฏุณุชุฑุณ ูพุฏุง ูโฺฉููุฏุ ูพุดุชุจุงู ููโุดููุฏ.

ุญุงูุง ูุง ฺฉุฌุง ุจู ฺูู ุณุงุฎุชุงุฑ ุฏุงุฏูโุง ุงุญุชุงุฌ ุฏุงุฑูุ

## ฺฉุงุฑุจุฑุฏ: ุฏุงุฏู ุงุถุงู

ุญูุฒู ุงุตู ฺฉุงุฑุจุฑุฏ `WeakMap` ฺฉ *ุญุงูุธู ุฏุงุฏู ุงุถุงู* ุงุณุช.

ุงฺฏุฑ ุฏุฑ ุญุงู ฺฉุงุฑ ฺฉุฑุฏู ุจุง ุดุกุง ูุณุชู ฺฉู ุจู ฺฉุฏ ุฏฺฏุฑ ยซุชุนูู ุฏุงุฑุฏยปุ ุดุงุฏ ฺฉ ฺฉุชุงุจุฎุงูู ุดุฎุต ุซุงูุซุ ู ุจุฎูุงูู ุฏุงุฏูโูุง ฺฉู ุจู ุขู ุชุฎุตุต ุฏุงุฏู ุดุฏู ุฑุง ุฐุฎุฑู ฺฉูู ฺฉู ููุท ุชุง ุฒูุงู ฺฉู ุดุก ุฒูุฏู ุงุณุช ูุฌูุฏ ุฏุงุดุชู ุจุงุดูุฏุ ุณูพุณ `WeakMap` ุฏููุง ฺุฒ ุงุณุช ฺฉู ูุงุฒ ุฏุงุฑู.

ูุง ุจุง ุงุณุชูุงุฏู ุงุฒ ุดุก ุจู ุนููุงู ฺฉูุฏุ ุฏุงุฏู ุฑุง ุฏุฑ ฺฉ `WeakMap` ูุฑุงุฑ ูโุฏูู ู ุฒูุงู ฺฉู ุดุก ุฒุจุงููโุฑูุจ ุดุฏุ ุฏุงุฏู ูู ุจู ุทูุฑ ุฎูุฏฺฉุงุฑ ูุงูพุฏุฏ ูโุดูุฏ.

```js
weakMap.set(john, "ูุณุชูุฏุงุช ูุฎู");
// ุงุฒุจู ุจุฑูุฏุ ูุณุชูุฏุงุช ูุฎู ูู ุจู ุทูุฑ ุฎูุฏฺฉุงุฑ ูุงุจูุฏ ูโุดููุฏ john ุงฺฏุฑ
```

ุจุงุฏ ฺฉ ูุซุงู ุจุจูู.

ุจุฑุง ูุซุงูุ ูุง ฺฉุฏ ุฏุงุฑู ฺฉู ุชุนุฏุงุฏ ุจุงุฒุฏุฏ ุฑุง ุจุฑุง ฺฉุงุฑุจุฑุงู ุฐุฎุฑู ูโฺฉูุฏ. ุงุทูุงุนุงุช ุฏุฑูู ฺฉ map ุฐุฎุฑู ุดุฏู ุงุณุช: ฺฉ ุดุก user ฺฉูุฏ ุงุณุช ู ุชุนุฏุงุฏ ุจุงุฒุฏุฏ ููุฏุงุฑ ุงุณุช. ุฒูุงู ฺฉู ฺฉุงุฑุจุฑ ุฎุงุฑุฌ ุดูุฏ (ุดุก ุขู ุฒุจุงููโุฑูุจ ุดูุฏ)ุ ูุง ุฏฺฏุฑ ููโุฎูุงูู ุชุนุฏุงุฏ ุจุงุฒุฏุฏ ุขููุง ุฑุง ุฏุงุดุชู ุจุงุดู.

ฺฉ ูุซุงู ุงุฒ ุชุงุจุน ุดูุงุฑูุฏู ุจุง ุงุณุชูุงุฏู ุงุฒ `Map`:

```js
// ๐ visitsCount.js
let visitsCountMap = new Map(); // map: user => ุชุนุฏุงุฏ ุจุงุฒุฏุฏ

// ุงูุฒุงุด ุชุนุฏุงุฏ ุจุงุฒุฏุฏ
function countUser(user) {
  let count = visitsCountMap.get(user) || 0;
  visitsCountMap.set(user, count + 1);
}
```

ู ุงูุฌุง ูุณูุช ุฏฺฏุฑ ุงุฒ ฺฉุฏ ุฑุง ุฏุงุฑูุ ุดุงุฏ ฺฉ ูุงู ุฏฺฏุฑ ุงุฒ ุขู ุงุณุชูุงุฏู ฺฉูุฏ:

```js
// ๐ main.js
let john = { name: "John" };

countUser(john); // ุฑุง ูโุดูุงุฑุฏ john ุชุนุฏุงุฏ ุจุงุฒุฏุฏ

// ูุง ุฑุง ุชุฑฺฉ ฺฉูุฏ john ุจุนุฏุง ฺฉู
john = null;
```

ุญุงูุงุ ุดุก `john` ุจุงุฏ ุฒุจุงููโุฑูุจ ุดูุฏ ุงูุง ุฏุฑ ุญุงูุธู ูโูุงูุฏุ ุจู ุฏูู ุงูฺฉู ุฏุฑ `visitsCountMap` ฺฉูุฏ ุงุณุช.

ูุง ูุงุฒ ุฏุงุฑู ฺฉู `visitsCountMap` ุฑุง ุฒูุงู ฺฉู ฺฉุงุฑุจุฑุงู ุฑุง ุญุฐู ูโฺฉูู ูพุงฺฉ ฺฉููุ ุฏุฑ ุบุฑ ุงู ุตูุฑุช ุจู ุทูุฑ ูุงูุญุฏูุฏ ุฏุฑ ุญุงูุธู ฺฏุณุชุฑุฏูโุชุฑ ูโุดูุฏ. ฺูู ูพุงฺฉ ฺฉุฑุฏู ุฏุฑ ูุนูุงุฑโูุง ูพฺุฏู ฺฉุงุฑ ุฎุณุชูโฺฉููุฏู ูโุดูุฏ.

ูโุชูุงูู ุจุง ุงุณุชูุงุฏู ุงุฒ `WeakMap` ุงุฒ ุงู ููุถูุน ุฏูุฑ ฺฉูู:

```js
// ๐ visitsCount.js
let visitsCountMap = new WeakMap(); // weakmap: user => ุชุนุฏุงุฏ ุจุงุฒุฏุฏ

// ุงูุฒุงุด ุชุนุฏุงุฏ ุจุงุฒุฏุฏ
function countUser(user) {
  let count = visitsCountMap.get(user) || 0;
  visitsCountMap.set(user, count + 1);
}
```

ุญุงูุง ูุง ุญุชูุง ูุจุงุฏ `visitsCountMap` ุฑุง ุชูุฒ ฺฉูู. ุจุนุฏ ุงุฒ ุงูฺฉู ุดุก `john` ุบุฑูุงุจู ุฏุณุชุฑุณ ุดูุฏุ ุนู ุจู ุฌุฒ ฺฉูุฏ `WeakMap` ูฺ ุฑุฌูุน ูุฏุงุดุชู ุจุงุดุฏุ ููุฑุงู ุจุง ุงุทูุงุนุงุช ฺฉู ฺฉูุฏ ุขููุง ุงู ุดุก ุจูุฏุ ุงุฒ ุญุงูุธู ูพุงฺฉ ูโุดููุฏ.

## ฺฉุงุฑุจุฑุฏ: ฺฉูุด ฺฉุฑุฏู (caching)

ฺฉ ุฏฺฏุฑ ุงุฒ ูุซุงูโูุง ูุชุฏุงูู ฺฉูุด ฺฉุฑุฏู ุงุณุช. ูุง ูโุชูุงูู ูุชุงุฌ ฺฉ ุชุงุจุน ุฑุง ุฐุฎุฑู (ยซฺฉูุดยป) ฺฉูู ุชุง ูุฑุงุฎูุงูโูุง ุขูุฏู ฺฉู ุดุก ฺฉุณุงู ุฑุง ูโฺฏุฑูุฏุ ุฏูุจุงุฑู ุงุฒ ุขู ุงุณุชูุงุฏู ฺฉููุฏ.

ุจุฑุง ุงู ฺฉุงุฑุ ูุง ูโุชูุงูู ุงุฒ `Map` ุงุณุชูุงุฏู ฺฉูู (ุงู ุณูุงุฑู ุจููู ูุณุช):

```js run
// ๐ cache.js
let cache = new Map();

// ูุชุฌู ุฑุง ูุญุงุณุจู ู ุฐุฎุฑู ฺฉู
function process(obj) {
  if (!cache.has(obj)) {
    let result = obj /* ูุญุงุณุจุงุช ูุชุฌู ุจุฑุง */;

    cache.set(obj, result);
  }

  return cache.get(obj);
}

*!*
// :ุฏุฑ ูุงู ุฏฺฏุฑ ุงุณุชูุงุฏู ฺฉูู process() ุญุงูุง ูโุชูุงูู ุงุฒ
*/!*

// ๐ main.js
let obj = {/* ูุฑุถ ูโฺฉูู ฺฉ ุดุก ุฏุงุฑู */};


let result1 = process(obj); // ูุญุงุณุจู ุดุฏ

// ...ุจุนุฏุงุ ุงุฒ ฺฉ ุฌุง ุฏฺฏุฑ ฺฉุฏ...
let result2 = process(obj); // ูุชุฌู ุฐุฎุฑู ุดุฏู ุงุฒ ฺฉูุด ฺฏุฑูุชู ูโุดูุฏ

// :ุจุนุฏุงุ ุฒูุงู ฺฉู ุดุก ุฏฺฏุฑ ูุงุฒ ูุจุงุดุฏ...
obj = null;

alert(cache.size); // 1 (!ุง ูุง! ุดุก ูููุฒ ุฏุฑ ฺฉุด ููุฌูุฏ ุงุณุช ู ุญุงูุธู ุฑุง ุงุดุบุงู ูโฺฉูุฏ)
```

ุจุฑุง ฺูุฏ ูุฑุงุฎูุงู `process(obj)` ููุฑุงู ุจุง ุดุก ฺฉุณุงูุ ุชููุง ูุชุฌู ุฑุง ุงููู ุจุงุฑ ูุญุงุณุจู ูโฺฉูุฏ ู ุณูพุณ ุขู ุฑุง ุงุฒ `cache` ูโฺฏุฑุฏ. ูฺฺฏ ููู ุงู ุงุณุช ฺฉู ุฒูุงู ฺฉู ุดุก ุฏฺฏุฑ ุงุญุชุงุฌ ูุจุงุดุฏุ ูุง ุจุงุฏ `cache` ุฑุง ุงุฒ ุขู ุชูุฒ ฺฉูู.

ุงฺฏุฑ ูุง `Map` ุฑุง ุจุง `WeakMap` ุฌุงฺฏุฒู ฺฉููุ ุณูพุณ ุงู ูุดฺฉู ุงุฌุงุฏ ููโุดูุฏ. ูุชุฌู ฺฉุดโุดุฏู ุจุนุฏ ุงุฒ ุงูฺฉู ุดุก ุฒุจุงููโุฑูุจ ุดุฏุ ุงุฒ ุญุงูุธู ุจู ุทูุฑ ุฎูุฏฺฉุงุฑ ุญุฐู ูโุดูุฏ.

```js run
// ๐ cache.js
*!*
let cache = new WeakMap();
*/!*

// ูุชุฌู ุฑุง ูุญุงุณุจู ู ุฐุฎุฑู ฺฉู
function process(obj) {
  if (!cache.has(obj)) {
    let result = obj /* ูุญุงุณุจุงุช ูุชุฌู ุจุฑุง */;

    cache.set(obj, result);
  }

  return cache.get(obj);
}

// ๐ main.js
let obj = {/* ุดุก */};

let result1 = process(obj);
let result2 = process(obj);

// :ุจุนุฏุงุ ุฒูุงู ฺฉู ุดุก ุฏฺฏุฑ ูุงุฒ ูุจุงุดุฏ...
obj = null;

// ุงุณุช WeakMap ุฑุง ุฏุฑุงูุช ฺฉุฑุฏุ ฺูู ฺฉ  cache.size ููโุชูุงู
// ุงูุง ุง 0 ุงุณุช ุง ุจู ุฒูุฏ 0 ูโุดูุฏ
// ุฒุจุงููโุฑูุจ ุดูุฏุ ุฏุงุฏู ฺฉุดโุดุฏู ูู ูพุงฺฉ ูโุดูุฏ obj ุฒูุงู ฺฉู
```

## ุณุงุฎุชุงุฑ WeakSet

`WeakSet` ูู ุฑูุชุงุฑ ูุดุงุจู ุฏุงุฑุฏ:

- ุงู ุณุงุฎุชุงุฑ ูุงููุฏ `Set` ุงุณุช ุงูุง ููุท ูโุชูุงูู ุดุกูุง ุฑุง ุจู `WeakSet` ุงุถุงูู ฺฉูู (ูู ููุฏุงุฑูุง ุงุตู).
- ฺฉ ุดุก ุชุง ุฒูุงู ฺฉู ุงุฒ ุฌุง ุฏฺฏุฑ ูุงุจู ุฏุณุชุฑุณ ุจุงุดุฏ ุฏุฑ set ูุฌูุฏ ุฎูุงูุฏ ุฏุงุดุช.
- ูุงููุฏ `Set`ุ ุงู ุณุงุฎุชุงุฑ ุงุฒ `add`ุ `has` ู `delete` ูพุดุชุจุงู ูโฺฉูุฏ ุงูุง `size` ู `keys()` ูุฏุงุฑุฏ ู ููโุชูุงู ุฏุฑ ุขู ุญููู ุฒุฏ.

ุจู ุฏูู ุงูฺฉู "weak(ุถุนู)" ุงุณุชุ ุจู ุนููุงู ุญุงูุธู ุงุถุงู ูู ููุดุด ุฑุง ุงูุง ูโฺฉูุฏ. ุงูุง ูู ุจุฑุง ูุฑ ุฏุงุฏู ุฏูุฎูุงูุ ุจูฺฉู ุชุฑุฌุญุง ุจุฑุง ฺฏุฒุงุฑูโูุง ยซุจูู/ุฎุฑยป ุงุณุชูุงุฏู ูโุดูุฏ. ุงูฺฉู ฺฉ ุดุก ุฏุฑ `WeakSet` ูุฌูุฏ ุฏุงุดุชู ุจุงุดุฏุ ููฺฉู ุงุณุช ุจู ูุนูุง ฺุฒ ุฏุฑุจุงุฑู ุขู ุจุงุดุฏ.

ุจุฑุง ูุซุงูุ ูุง ูโุชูุงูู ฺฉุงุฑุจุฑุงู ุฑุง ุจู `WeakSet` ุงุถุงูู ฺฉูู ุชุง ูพฺฏุฑ ฺฉูู ฺฉู ฺู ฺฉุณ ุณุงุช ูุง ุฑุง ุฏุฏู ุงุณุช:

```js run
let visitedSet = new WeakSet();

let john = { name: "John" };
let pete = { name: "Pete" };
let mary = { name: "Mary" };

visitedSet.add(john); // ุณุงุช ูุง ุฑุง ุฏุฏ John
visitedSet.add(pete); // Pete ุณูพุณ
visitedSet.add(john); // John ู ุฏูุจุงุฑู

// ุงูุงู 2 ฺฉุงุฑุจุฑ ุฏุงุฑุฏ visitedSet

// ุณุงุช ุฑุง ุฏุฏู ุงุณุชุ John ฺฺฉ ูโฺฉูู ฺฉู ุขุง
alert(visitedSet.has(john)); // true

// ุณุงุช ุฑุง ุฏุฏู ุงุณุชุ Mary ฺฺฉ ูโฺฉูู ฺฉู ุขุง
alert(visitedSet.has(mary)); // false

john = null;

// ุจู ุทูุฑ ุฎูุฏฺฉุงุฑ ุงุฒ ุขู ุดุก ุชูุฒ ูโุดูุฏ visitedSet
```

ุจุฒุฑฺฏโุชุฑู ูุญุฏูุฏุช `WeakMap` ู `WeakSet` ุงู ุงุณุช ฺฉู ููโุชูุงู ุฏุฑ ุขู ุญููู ุฒุฏ ู ุชูุงู ูุญุชูุง ุญุงู ุญุงุถุฑ ุฑุง ฺฏุฑูุช. ุงู ููุถูุน ููฺฉู ุงุณุช ุงุฐุช ฺฉููุฏู ุจุงุดุฏ ุงูุง ุจุงุนุซ ููโุดูุฏ ฺฉู `WeakMap/WeakSet` ฺฉุงุฑ ุงุตู ุฎูุฏุดุงู ุฑุง ุงูุฌุงู ูุฏููุฏ -- ุงูฺฉู ฺฉ ุญุงูุธู ยซุงุถุงููยป ุฏุงุฏูุ ุจุฑุง ุดุกูุง ุจุงุดูุฏ ฺฉู ุฏุฑ ุฌุง ุฏฺฏุฑ ุฐุฎุฑู/ูุฏุฑุช ูโุดููุฏ.

## Summary

`WeakMap` ฺฉ ูุฌููุนู `Map`-like ุงุณุช ฺฉู ููุท ุดุกูุง ุฑุง ุจู ุนููุงู ฺฉูุฏ ูุจูู ูโฺฉูุฏ ู ููุงู ุดุก ู ุฏุงุฏูโูุง ุชุฎุตุต ุฏุงุฏู ุดุฏู ุจู ุขู ุฑุง ุฒูุงู ฺฉู ุดุก ุงุฒ ุทุฑู ุฏฺฏุฑ ุบุฑ ูุงุจู ุฏุณุชุฑุณ ุดูุฏุ ุญุฐู ูโฺฉูุฏ.

`WeakSet` ฺฉ ูุฌููุนู `Set`-like ุงุณุช ฺฉู ููุท ุดุกูุง ุฑุง ุฐุฎุฑู ูโฺฉูุฏ ู ุฒูุงู ฺฉู ุขููุง ุงุฒ ุทุฑู ุฏฺฏุฑ ุบุฑ ูุงุจู ุฏุณุชุฑุณ ุดููุฏุ ุญุฐูโุดุงู ูโฺฉูุฏ.

ูุงุฏูโูุง ุงุตูโุดุงู ุงู ุงุณุช ฺฉู ฺฉ ุฑุฌูุน ุถุนู ุจู ุดุกูุง ุฏุงุฑูุฏุ ูพุณ ุดุกูุง ุจู ุฑุงุญุช ูโุชูุงููุฏ ุจุง ุฒุจุงููโุฑูุจ ุงุฒุจู ุจุฑููุฏ.

ุงูุง ุจู ุงู ููุช ฺฉู ุงุฒ `clear`ุ `size`ุ `keys`ุ `values` ู... ูพุดุชุจุงู ููโฺฉููุฏ.

`WeakMap` ู `WeakSet` ุจู ุนููุงู ุณุงุฎุชุงุฑ ุฏุงุฏูโูุง ยซุซุงูููยป ุฏุฑ ฺฉูุงุฑ ุญุงูุธู ุดุก ยซุงุตูยป ุงุณุชูุงุฏู ูโุดููุฏ. ุฒูุงู ฺฉู ุดุก ุงุฒ ุญุงูุธู ุงุตู ุญุฐู ุดูุฏ ู ููุท ุจู ุนููุงู ฺฉูุฏ `WeakMap` ุง ุนุถู ุฏุฑ `WeakSet` ุจุงุดุฏุ ุจู ุทูุฑ ุฎูุฏฺฉุงุฑ ุญุฐู ูโุดูุฏ.
